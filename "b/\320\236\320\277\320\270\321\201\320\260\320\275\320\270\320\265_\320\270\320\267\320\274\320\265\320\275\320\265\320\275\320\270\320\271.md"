# Обновления в проекте

В репозитории был выполнен рефакторинг для ускорения работы арбитражного бота и улучшения управления транзакциями.

## Основные изменения

1. **Поддержка асинхронных запросов**
   - Модуль `trading_api.py` переписан с использованием библиотеки `aiohttp`. Теперь функции получения данных и отправки транзакций имеют асинхронные версии, что позволяет выполнять сетевые операции параллельно.
2. **Настраиваемая цена газа**
   - В файле `config.py` добавлены параметры `gas_price`, `tx_initial_delay` и `tx_poll_interval`. Они позволяют указывать желаемую стоимость газа и интервалы ожидания между запросами статуса транзакции.
   - Параметр `gas_price` задаёт цену газа, передаваемую при отправке транзакций. Повышенное значение ускоряет попадание транзакций в блок.
   - `tx_initial_delay` определяет паузу перед первым запросом статуса после отправки. Уменьшите его для более раннего мониторинга.
   - `tx_poll_interval` устанавливает частоту опроса статуса транзакции. Чем меньше интервал, тем быстрее получаем подтверждение.
   - Эти настройки используются в `swap_pool_async` и основном цикле `arbitrage.py`, что позволяет гибко управлять скоростью обработки сделок.
3. **Асинхронный цикл арбитража**
   - В `arbitrage.py` основной цикл работы и получение пулов переведены на `asyncio`. Это снижает время простоя и позволяет быстрее реагировать на изменения рынка.
4. **Исправление ожидания в функции отправки сообщений**
   - В функции `send_msg` ошибка с использованием `await` внутри синхронной функции заменена на `time.sleep`, чтобы избежать синтаксической ошибки.

5. **Веб-сокеты для обновлений пулов**
   - Добавлен метод `pools_ws` в `trading_api.py`, который подключается к серверу по WebSocket и выдаёт свежие данные по пулам.
   - Основной цикл `arbitrage.py` теперь получает обновления из этого потока, что уменьшает задержку между изменениями на рынке и их обработкой ботом.

Эти изменения ускоряют обмен данными с сетью и дают возможность тонкой настройки транзакций, что потенциально повышает прибыльность арбитражных операций.
